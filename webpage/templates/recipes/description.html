<!DOCTYPE html>
{% extends 'base.html' %}
{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ recipe.name }}</title>
</head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/style.css' %}">
<body>
<div class="d-grid d-md-block">
    <a href="{% url 'recipe_list' %}" class="btn btn-success my-3 mx-3" type="button">Go Back</a>
</div>
<div class="container-fluid">
    <div class="row fill">
        <div class="col-md-6 align-content-left flex-fill">
            <div class="text-center card-text mx-3 mt-3">
                <img src="{{ recipe.image }}" alt="{{ recipe.name }}" class="img-fluid">
            </div>
        </div>
        <div class="col-md-6">
            <h1 class="display-4">{{ recipe.name }}</h1>
            <p class="lead mx-1">By: {{ recipe.poster_id.username }}</p>
        <div style="font-size: 20px ;display: flex; align-items: center;"><i class="bi bi-clock mx-1"></i> {{ recipe.estimated_time }} minutes</div>
            <div class="d-flex align-items-center mt-2">
                <div>
                    {% if recipe.difficulty == "Easy" %}
                    <h4><a href="?difficulty=Easy" class="badge badge-pill badge-success" style="text-decoration:none">Easy</a></h4>
                    {% elif recipe.difficulty == "Medium" %}
                    <h4><a href="?difficulty=Medium" class="badge badge-pill badge-warning" style="text-decoration:none">Medium</a></h4>
                    {% elif recipe.difficulty == "Hard" %}
                    <h4><a href="?difficulty=Hard" class="badge badge-pill badge-danger" style="text-decoration:none">Hard</a></h4>
                    {% endif %}
                    {% for diet in recipe.diets.all %}
                    <h4 class="badge bg-success" style="font-size: 14px">{{ diet.name }}</h4>
                    {% empty %}
                    {% endfor %}
                </div>
            </div>
            <h4 class="mt-2">Description</h4>
            <p style="font-size: 14px">{{ recipe.description }}</p>
            </div>
            <div class="col-md-6">
            <h4 class="mb-3">Ingredients</h4>
                <ul class="list-group" id="ingredients">
                    {% for ingredient in recipe.get_ingredients %}
                    <li class="checked" onclick="cross_out(this)"><p class="my-2 mx-2"><b>{{ ingredient.amount }}</b> {{ ingredient.unit }} {{ ingredient.ingredient.name }}</p></li>
                    {% endfor %}
                </ul>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $(document).ready(function(){
                    $('#ingredients li:nth-child(odd)').addClass('alternate');
                    });
                </script>
                <script>
                cross_out = (element) => {
                    if (element.style.textDecoration === "line-through") {
                        element.style.textDecoration = "none";
                        element.style.color = "black"
                    } else {
                        element.style.textDecoration = "line-through";
                        element.style.color = "white";
                    }
                }
                </script>
                <h4 class="mb-3 mt-3">Nutritions</h4>
                <ul class="list-group fill" id="nutrition">
                    {% for nutrients in recipe.get_nutrition %}
                    <li><p class="my-2 mx-2">{{ nutrients }}</p></li>
                    {% endfor %}
                </ul>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $(document).ready(function(){
                    $('#nutrition li:nth-child(odd)').addClass('alternate');
                    });
                </script>
            </div>
            <div class="col-md-6">
            <h4 class="mb-3">Instructions</h4>
            <ul class="list-group fill" id="steps">
                {% for step in steps %}
                <li class="checked" onclick="cross_out(this)"><p class="my-2 mx-2"><b class="mx-2">{{ step.number }}.</b>{{ step.description }}</p></li>
                {% empty %}
                {% endfor %}
            </ul>
                <script>
                    $(document).ready(function(){
                    $('#steps li:nth-child(even)').addClass('alternate');
                    });
                </script>
            <script>
                cross_out = (element) => {
                    if (element.style.textDecoration === "line-through") {
                        element.style.textDecoration = "none";
                    } else {
                        element.style.textDecoration = "line-through"
                    }
                }
                </script>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
</body>
</html>