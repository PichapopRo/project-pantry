<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<html>
{% extends 'base.html' %}
<body>
{% block content %}
<form method="get">
{% csrf_token %}
    <label for="diet">Filter by diet:</label>
    <select name="diet" id="diet">
        <option value="">All Diets</option>
        {% for diet in diets %}
        <option value="{{ diet.name }}" {% if diet.name == selected_diet %}selected{% endif %}>{{ diet.name }}</option>
        {% endfor %}
    </select>

    <label for="ingredient">Filter by ingredient:</label>
    <input type="text" name="ingredient" id="ingredient" value="{{ selected_ingredient }}" placeholder="Enter ingredient">
    <label for="equipment">Filter by equipment:</label>
    <input type="text" name="equipment" id="equipment" value="{{ selected_equipment }}" placeholder="Enter equipment">
    <label for="estimated_time">Estimated Time (minutes):</label>
    <input type="number" name="estimated_time" id="estimated_time" value="{{ estimated_time }}" placeholder="Enter estimated time">

    <button type="submit">Filter</button>
</form>
    <form method="GET" action="">
    <label>
        <input type="checkbox" name="name_order" value="1"
            {% if request.GET.name_order %} checked {% endif %}>
        Sort by Name
    </label>
    <label>
        <input type="checkbox" name="difficulty" value="1"
            {% if request.GET.difficulty %} checked {% endif %}>
        Sort by Difficulty
    </label>
        <label>
        <input type="checkbox" name="created_at" value="1"
            {% if request.GET.difficulty %} checked {% endif %}>
        Sort by Created Time
    </label>
    <button type="submit">Sort</button>
</form>
{% if recipe_list %}
<div class="row">
        <div class="col my-3">
            {% for recipe in recipe_list %}
            <div class="card mb-3 mx-auto">
                <div class="card-body">
                    <div class="row" style="max width = 400px">
                        <div class="col-md-3">
                            <img src="recipe.img" class="img-fluid rounded-start" alt="...">
                        </div>
                        <div class="col-md-6">
                            <h5 class="card-title my-2">{{ recipe.name }}</h5>
                            <small class="card-text my-2">By: {{ recipe.poster_id.username }}</small>
                            <p class="card-text my-2">Description</p>
                            <a href="{% url 'recipe' recipe.id %}" class="stretched-link"></a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
{% elif total_recipes == 0 %}
    <p>No recipes available.</p>
{% endif %}

<div class="d-flex justify-content-center mt-4">
    <form method="post" action=".">
        {% csrf_token %}
        {% if view_count == 0 and total_recipes > 0 %}
            <button type="submit" name="increment" value="5" class="btn btn-success">View Recipes</button>
        {% elif total_recipes > 0 %}
            <button type="submit" name="increment" value="5" class="btn btn-success">Load More Recipes</button>
        {% endif %}
    </form>
</div>
{% endblock %}
</body>
</html>
